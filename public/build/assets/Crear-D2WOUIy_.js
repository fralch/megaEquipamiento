import{r as c,j as e,Y as S}from"./app-Cglb1nKu.js";const P=({onSubmit:p})=>{const[n,x]=c.useState([]),[a,l]=c.useState({sku:"",nombre:"",id_subcategoria:"",marca_id:"",pais:"",precio_sin_ganancia:"",precio_ganancia:"",precio_igv:"",imagen:null,descripcion:"",video:"",envio:"",soporte_tecnico:"",caracteristicas:"{}",datos_tecnicos:"{}",archivos_adicionales:"{}"}),[d,u]=c.useState([]),[i,r]=c.useState([]),[o,g]=c.useState([]),[b,j]=c.useState("");c.useEffect(()=>{fetch("http://127.0.0.1:8000/categorias-all").then(s=>s.json()).then(s=>u(s)).catch(s=>console.error("Error fetching categorías:",s)),fetch("http://127.0.0.1:8000/subcategoria/all").then(s=>s.json()).then(s=>r(s)).catch(s=>console.error("Error fetching subcategorías:",s)),fetch("http://127.0.0.1:8000/marca/all").then(s=>s.json()).then(s=>g(s)).catch(s=>console.error("Error fetching marcas:",s))},[]);const h=s=>{const{name:t,value:m}=s.target;l({...a,[t]:m})},w=s=>{const t=s.target.files[0];l({...a,imagen:t})},N=s=>{j(s.target.value),l({...a,id_subcategoria:""})},v=async s=>{s.preventDefault();const t=new FormData;t.append("sku",a.sku),t.append("nombre",a.nombre),t.append("id_subcategoria",a.id_subcategoria),t.append("marca_id",a.marca_id),t.append("pais",a.pais),t.append("precio_sin_ganancia",a.precio_sin_ganancia),t.append("precio_ganancia",a.precio_ganancia),t.append("precio_igv",a.precio_igv),t.append("descripcion",a.descripcion),t.append("video",a.video),t.append("envio",a.envio),t.append("soporte_tecnico",a.soporte_tecnico),t.append("caracteristicas",a.caracteristicas),t.append("datos_tecnicos",a.datos_tecnicos),t.append("archivos_adicionales",a.archivos_adicionales),a.imagen&&t.append("imagen",a.imagen);try{const m=await fetch("http://127.0.0.1:8000/product/create",{method:"POST",body:t,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(m.ok){const f=await m.json();console.log("Producto creado:",f),x([...n,{...a,imagen:a.imagen?URL.createObjectURL(a.imagen):""}]),l({sku:"",nombre:"",id_subcategoria:"",marca_id:"",pais:"",precio_sin_ganancia:"",precio_ganancia:"",precio_igv:"",imagen:null,descripcion:"",video:"",envio:"",soporte_tecnico:"",caracteristicas:"{}",datos_tecnicos:"{}",archivos_adicionales:"{}"})}else console.error("Error al crear el producto:",m.statusText)}catch(m){console.error("Error en la solicitud:",m)}},C=i.filter(s=>s.id_categoria===parseInt(b));return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 w-full mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Crear Producto"}),e.jsxs("form",{onSubmit:v,children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Agregar / Editar Producto"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[[{label:"SKU",name:"sku",type:"text"},{label:"Nombre",name:"nombre",type:"text"},{label:"Categoría",name:"categoria",type:"select",options:d.map(s=>({value:s.id_categoria,label:s.nombre}))},{label:"Subcategoría",name:"id_subcategoria",type:"select",options:C.map(s=>({value:s.id_subcategoria,label:s.nombre}))},{label:"Marca",name:"marca_id",type:"select",options:o.map(s=>({value:s.id_marca,label:s.nombre}))},{label:"País",name:"pais",type:"text"},{label:"Precio sin Ganancia",name:"precio_sin_ganancia",type:"number",step:"0.01"},{label:"Precio Ganancia",name:"precio_ganancia",type:"number",step:"0.01"},{label:"Precio IGV",name:"precio_igv",type:"number",step:"0.01"},{label:"Video",name:"video",type:"text"},{label:"Envío",name:"envio",type:"text"},{label:"Soporte Técnico",name:"soporte_tecnico",type:"text"},{label:"Características",name:"caracteristicas",type:"text"},{label:"Datos Técnicos",name:"datos_tecnicos",type:"text"},{label:"Archivos Adicionales",name:"archivos_adicionales",type:"text"}].map(({label:s,name:t,type:m,options:f,step:_})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:s}),m==="select"?e.jsxs("select",{id:t,name:t,value:t==="categoria"?b:a[t],onChange:t==="categoria"?N:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:t==="id_subcategoria"||t==="marca_id",children:[e.jsx("option",{value:"",children:"--Selecciona una opción--"}),f&&f.map(({value:y,label:k})=>e.jsx("option",{value:y,children:k},y))]}):e.jsx("input",{type:m,id:t,name:t,value:a[t],onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",step:_,required:t==="sku"||t==="nombre"||t==="id_subcategoria"||t==="marca_id"})]},t)),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"imagen",className:"block text-sm font-medium text-gray-700",children:"Imagen"}),e.jsxs("div",{className:"mt-1 block w-full",children:[e.jsx("input",{type:"file",id:"imagen",name:"imagen",onChange:w,accept:"image/*",className:"hidden"}),e.jsx("label",{htmlFor:"imagen",className:"block w-full border border-gray-300 rounded-md shadow-sm hover:border-indigo-500 hover:ring-2 hover:ring-indigo-500 cursor-pointer bg-white text-indigo-600 py-2 px-4 text-sm font-medium text-center transition duration-150 ease-in-out",children:"Seleccionar archivo"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",value:a.descripcion,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),e.jsx("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 w-full md:w-auto",children:"Guardar Producto"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 w-full mx-auto",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Productos Totales"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subcategoría"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marca"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"País"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imagen"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.sku}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.nombre}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.id_subcategoria}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.marca_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.pais}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.precio_sin_ganancia}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.imagen&&e.jsx("img",{src:s.imagen,alt:"Producto",className:"h-10 w-10 object-cover rounded-full"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.descripcion})]},t))})]})})]})]})},F=({onSubmit:p})=>{const[n,x]=c.useState([]),[a,l]=c.useState({nombre:"",descripcion:""}),d=i=>{const{name:r,value:o}=i.target;l({...a,[r]:o})},u=i=>{i.preventDefault(),x([...n,a]),l({nombre:"",descripcion:""}),p(a)};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 w-full mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Crear Categoría"}),e.jsxs("form",{onSubmit:u,children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Agregar / Editar Categoría"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",value:a.nombre,onChange:d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",value:a.descripcion,onChange:d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),e.jsx("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 w-full md:w-auto",children:"Guardar Categoría"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 w-full mx-auto",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Categorías Totales"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((i,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.nombre}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.descripcion})]},r))})]})})]})]})},D=({onSubmit:p})=>{const[n,x]=c.useState([]),[a,l]=c.useState({nombre:"",descripcion:"",id_categoria:""}),d=i=>{const{name:r,value:o}=i.target;l({...a,[r]:o})},u=i=>{i.preventDefault(),x([...n,a]),l({nombre:"",descripcion:""}),p(a)};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 w-full mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Crear Subcategoría"}),e.jsxs("form",{onSubmit:u,children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Agregar / Editar Subcategoría"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",value:a.nombre,onChange:d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700",children:"Categoria Padre"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",value:a.nombre,onChange:d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",value:a.descripcion,onChange:d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),e.jsx("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 w-full md:w-auto",children:"Guardar Subcategoría"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 w-full mx-auto",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Subcategorías Totales"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria Padre"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((i,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.nombre}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.descripcion})]},r))})]})})]})]})},E=({onSubmit:p})=>{const[n,x]=c.useState([]),[a,l]=c.useState({nombre:"",descripcion:"",imagen:null}),d=r=>{const{name:o,value:g}=r.target;l({...a,[o]:g})},u=r=>{const o=r.target.files[0];l({...a,imagen:o})},i=r=>{r.preventDefault();const o=new FormData;o.append("nombre",a.nombre),o.append("descripcion",a.descripcion),a.imagen&&o.append("imagen",a.imagen),x([...n,{nombre:a.nombre,descripcion:a.descripcion,imagen:a.imagen?URL.createObjectURL(a.imagen):""}]),l({nombre:"",descripcion:"",imagen:null}),p(o)};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 w-full mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Crear Marca"}),e.jsxs("form",{onSubmit:i,children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Agregar / Editar Marca"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",value:a.nombre,onChange:d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",value:a.descripcion,onChange:d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"imagen",className:"block text-sm font-medium text-gray-700",children:"Imagen"}),e.jsx("input",{type:"file",id:"imagen",name:"imagen",accept:"image/*",onChange:u,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),e.jsx("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 w-full md:w-auto",children:"Guardar Marca"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 w-full mx-auto",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Marcas Totales"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imagen"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((r,o)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.nombre}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.descripcion}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.imagen&&e.jsx("img",{src:r.imagen,alt:r.nombre,className:"h-10 w-10 object-cover rounded-full"})})]},o))})]})})]})]})},T=()=>{const[p,n]=c.useState(!0),[x,a]=c.useState(!1),[l,d]=c.useState(!1),[u,i]=c.useState(!1),[r,o]=c.useState({sku:"",nombre:"",id_subcategoria:"",marca_id:"",pais:"",precio_sin_ganancia:"",imagen:"",descripcion:""}),g=N=>{N.preventDefault(),console.log("Formulario enviado:",r)},b=()=>{n(!0),a(!1)},j=()=>{n(!1),a(!0)},h=()=>{n(!1),a(!1),d(!0)},w=()=>{n(!1),a(!1),d(!1),i(!0)};return e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col md:flex-row",children:[e.jsx(S,{title:"Crear"}),e.jsxs("div",{className:"w-full md:w-1/4 bg-blue-50 border-r border-blue-200 p-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("img",{src:"/img/logo2.png",alt:"Logo",className:"mb-4 w-3/5 mx-auto"}),e.jsx("h2",{className:"text-xl font-bold text-blue-600 text-center",children:"Elige el registro que deseas crear"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md font-medium",onClick:b,children:"Crear Producto"}),e.jsx("button",{className:"w-full bg-blue-200 text-blue-600 py-2 px-4 rounded-md font-medium",onClick:j,children:"Crear Categoria"}),e.jsx("button",{className:"w-full bg-blue-200 text-blue-600 py-2 px-4 rounded-md font-medium",onClick:h,children:"Crear Subcategoria"}),e.jsx("button",{className:"w-full bg-blue-200 text-blue-600 py-2 px-4 rounded-md font-medium",onClick:w,children:"Crear Marca"})]})]}),e.jsxs("div",{className:"w-full md:w-3/4 p-4",children:[e.jsx("div",{className:p?"block":"hidden",children:e.jsx(P,{onSubmit:g})}),e.jsx("div",{className:x?"block":"hidden",children:e.jsx(F,{onSubmit:g})}),e.jsx("div",{className:l?"block":"hidden",children:e.jsx(D,{onSubmit:g})}),e.jsx("div",{className:u?"block":"hidden",children:e.jsx(E,{onSubmit:g})})]})]})})};export{T as default};
