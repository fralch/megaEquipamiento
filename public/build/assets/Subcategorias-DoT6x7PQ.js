import{r as a,j as s,Y as j,a as N}from"./app-Cglb1nKu.js";import{H as v,M as S,N as C,F as y}from"./Footer-DN0bjEgH.js";import{P as w}from"./ProductGrid-DdRd47wC.js";function P({productos:r}){const[n,g]=a.useState(!1),[m,c]=a.useState([]),[l,u]=a.useState({}),[b,d]=a.useState(null),[h,p]=a.useState("");console.log("Productos recibidos:",r),a.useEffect(()=>{const e=localStorage.getItem("categoriasCompleta");e?c(JSON.parse(e)):fetch("http://127.0.0.1:8000/categorias-completa").then(t=>t.json()).then(t=>{c(t),localStorage.setItem("categoriasCompleta",JSON.stringify(t))}).catch(t=>console.error("Error fetching data:",t));const o=window.location.pathname.split("/"),f=o[o.length-1];fetch(`http://127.0.0.1:8000/subcategoria_id/${f}`).then(t=>t.json()).then(t=>{p(t.nombre)}).catch(t=>console.error("Error fetching subcategoria data:",t))},[]);const x=e=>{u(o=>({...o,[e]:!o[e]})),d(e)},i=()=>{g(!n)};return s.jsxs("div",{children:[s.jsx(j,{title:"Subcategoria"}),s.jsx(v,{}),s.jsx(S,{toggleMenu:i,className:"mt-10"}),s.jsx(C,{isOpen:n,onClose:i}),s.jsxs("div",{className:"min-w-screen min-h-screen bg-gray-200 flex",children:[s.jsx("nav",{className:"w-1/6 p-4 overflow-y-auto bg-white",id:"nav-fijo",children:m.map(e=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>x(e.nombre),className:`block w-full text-left p-2 rounded ${b===e.nombre?"bg-[#0c2249] text-blue-200":"bg-gray-200 hover:bg-white"}`,children:[e.nombre,s.jsx("span",{className:"float-right",children:l[e.nombre]?"-":"+"})]}),l[e.nombre]&&e.subcategorias&&e.subcategorias.map(o=>s.jsx(N,{href:`/subcategoria/${o.id_subcategoria}`,className:"block p-2 pl-6 hover:bg-blue-100 bg-blue-50 rounded",children:o.nombre},o.id_subcategoria))]},e.id_categoria))}),s.jsxs("div",{className:"flex-1 p-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:h}),s.jsx(w,{products:r})]})]}),s.jsx(y,{})]})}export{P as default};
